<!doctype html>
<html>
    <head>
        <title>我是标题</title>
        <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
            <style type='text/css'>
                html { font-family:Helvetica; color:#222; }
                h1 { color:steelblue; font-size:24px; margin-top:24px; }
                button { margin:0 3px 10px; font-size:12px; }
            </style>
    </head>
    
    <body>
        <h1>WebViewJavascriptBridge Demo</h1>
        
        <script>
            function setupWebViewJavascriptBridge(callback) {
                if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }
                if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }
                window.WVJBCallbacks = [callback];
                
                var WVJBIframe = document.createElement('iframe');
                WVJBIframe.style.display = 'none';
                WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
                document.documentElement.appendChild(WVJBIframe);
                setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)
            }
        
        setupWebViewJavascriptBridge(function(bridge) {
                                     bridge.registerHandler('OC_Call_JS_Methods', function(data, responseCallback) {
                                                            console.log("JS Receive Data:", data)
                                                            var responseData = { 'Javascript Says':'I receive！','JSReceiveData':data }
                                                            responseCallback(responseData)
                                                            })
                                     
                                     var callbackButton = document.getElementById('buttons')
                                     callbackButton.onclick = function(e) {
                                         e.preventDefault()
                                         bridge.callHandler('goToDetail',{'JSData': 'I come from JS!'}, function responseCallback(responseData) {
                                                            console.log("JS received response:", responseData)
                                                        })
                                     }
                                     })
            </script>
        
        <div>
            <button id="buttons">Click goToDetail</button>
        </div>
        
    </body>

</html>
